(this["webpackJsonpshare-video-remitano"]=this["webpackJsonpshare-video-remitano"]||[]).push([[0],{74:function(e,t,a){},75:function(e,t,a){},93:function(e,t,a){},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),l=a.n(c),i=a(8),o=a.n(i),u=a(11),s=a(10),d=a(101),m=a(100),p=a(99),v=a(97),f=a(48),b=(a(64),a(66),f.a.initializeApp({databaseURL:"https://share-video-remitano-default-rtdb.firebaseio.com/",apiKey:"AIzaSyCNHzGu6R7Osd6hfMYJjn0JocVY-0b5Vxo",authDomain:"share-video-remitano.firebaseapp.com",projectId:"share-video-remitano",storageBucket:"share-video-remitano.appspot.com",messagingSenderId:"1064066696968",appId:"1:1064066696968:web:6ea84774b51ce4146c0ebd",measurementId:"G-M186C986TN"})),h=b.auth(),E=b.database(),g=r.a.createContext();function j(){return Object(n.useContext)(g)}function k(e){var t=e.children,a=Object(n.useState)(),c=Object(s.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!0),u=Object(s.a)(o,2),d=u[0],m=u[1];Object(n.useEffect)((function(){return h.onAuthStateChanged((function(e){i(e),m(!1)}))}),[]);var p={currentUser:l,login:function(e,t){return h.signInWithEmailAndPassword(e,t)},signup:function(e,t){return h.createUserWithEmailAndPassword(e,t)},logout:function(){return h.signOut()},resetPassword:function(e){return h.sendPasswordResetEmail(e)},updateEmail:function(e){return l.updateEmail(e)},updatePassword:function(e){return l.updatePassword(e)}};return r.a.createElement(g.Provider,{value:p},!d&&t)}var w=a(9),O=a(19);function x(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),c=j().signup,l=Object(n.useState)(""),i=Object(s.a)(l,2),f=i[0],b=i[1],h=Object(n.useState)(!1),E=Object(s.a)(h,2),g=E[0],k=E[1],x=Object(w.f)();function y(){return(y=Object(u.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t.current.value===a.current.value){n.next=3;break}return n.abrupt("return",b("Passwords do not match"));case 3:return n.prev=3,b(""),k(!0),n.next=8,c(e.current.value,t.current.value);case 8:x.push("/"),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(3),b("Failed to create an account");case 14:k(!1);case 15:case"end":return n.stop()}}),n,null,[[3,11]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(d.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Sign Up"),f&&r.a.createElement(m.a,{variant:"danger"},f),r.a.createElement(p.a,{onSubmit:function(e){return y.apply(this,arguments)}},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(p.a.Group,{id:"password"},r.a.createElement(p.a.Label,null,"Password"),r.a.createElement(p.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(p.a.Group,{id:"password-confirm"},r.a.createElement(p.a.Label,null,"Password Confirmation"),r.a.createElement(p.a.Control,{type:"password",ref:a,required:!0})),r.a.createElement(v.a,{disabled:g,className:"w-100",type:"submit"},"Sign Up")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Already have an account? ",r.a.createElement(O.b,{to:"/login"},"Log In")))}var y=a(98),N=a(20),S=a(22),C=a(57),P=a(52),L=a(53),I=E.ref("videos"),A=new(function(){function e(){Object(P.a)(this,e)}return Object(L.a)(e,[{key:"getAll",value:function(){return I.once("value")}},{key:"create",value:function(e){return I.push(e)}},{key:"update",value:function(e,t){return console.log("value",t),E.ref("videos/".concat(e)).update(t)}},{key:"delete",value:function(e){return I.child(e).remove()}},{key:"deleteAll",value:function(){return I.remove()}}]),e}()),R=r.a.createContext();function U(e){var t=e.children,a=Object(n.useState)([]),c=Object(s.a)(a,2),l=c[0],i=c[1],d=Object(n.useState)(!0),m=Object(s.a)(d,2),p=m[0],v=m[1],f=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,A.getAll();case 3:return e.next=5,e.sent.val();case 5:t=e.sent,i(t),v(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b={loading:p,videos:l,setVideos:i,getVideos:f};return r.a.createElement(R.Provider,{value:b},t)}a(74);var _=function(){var e,t=j().currentUser,a=Object(n.useContext)(R),c=a.videos,l=a.loading,i=a.getVideos,s=a.setVideos,d="reactLike",m="reactDislike";Object(n.useEffect)((function(){i()}),[]);var p=function(){var e=Object(u.a)(o.a.mark((function e(a,n){var r,l,i,u,m,p,v=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=v.length>2&&void 0!==v[2]&&v[2],t){e.next=4;break}return alert("Please login to do reaction"),e.abrupt("return");case 4:return l=null===c||void 0===c?void 0:c[a],i=n===d?"like":"dislike",u=(null===l||void 0===l?void 0:l[n])||[],u=r?u.filter((function(e){return e!==t.email})):[].concat(Object(C.a)(u),[t.email]),e.prev=9,e.next=12,A.update(a,Object(S.a)(Object(S.a)({},l),{},(m={},Object(N.a)(m,n,u),Object(N.a)(m,i,u.length),m)));case 12:s(Object(S.a)(Object(S.a)({},c),{},Object(N.a)({},a,Object(S.a)(Object(S.a)({},l),{},(p={},Object(N.a)(p,n,u),Object(N.a)(p,i,u.length),p))))),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),console.log("error",e.t0);case 18:case"end":return e.stop()}}),e,null,[[9,15]])})));return function(t,a){return e.apply(this,arguments)}}();return l?r.a.createElement("div",null,"Loading......."):r.a.createElement("div",{className:"dashboard"},c?null===(e=Object.keys(c))||void 0===e?void 0:e.map((function(e){return function(e){var a,n,l=null===c||void 0===c?void 0:c[e],i=null===l||void 0===l||null===(a=l.reactLike)||void 0===a?void 0:a.includes(null===t||void 0===t?void 0:t.email),o=null===l||void 0===l||null===(n=l.reactDislike)||void 0===n?void 0:n.includes(null===t||void 0===t?void 0:t.email);return r.a.createElement("div",{className:"dashboard__block-item block row",key:null===l||void 0===l?void 0:l.title},r.a.createElement("div",{className:"col-6"},r.a.createElement("iframe",{title:null===l||void 0===l?void 0:l.title,src:null===l||void 0===l?void 0:l.src,width:"100%",height:"400",allowFullScreen:!0})),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"dashboard__block-info block"},r.a.createElement("h2",null,null===l||void 0===l?void 0:l.title),r.a.createElement("div",{className:"dashboard__block-title d-flex align-items-center"},r.a.createElement("p",{className:"share-by"},"Share by ",null===l||void 0===l?void 0:l.shareBy),i||o?i?r.a.createElement("span",{className:"big-reaction liked",onClick:function(){return p(e,d,!0)}}):r.a.createElement("span",{className:"big-reaction liked flip",onClick:function(){return p(e,m,!0)}}):r.a.createElement("div",null,r.a.createElement("span",{className:"big-reaction like-light",onClick:function(){return p(e,d)}}),r.a.createElement("span",{className:"big-reaction like-light flip",onClick:function(){return p(e,m)}}))),r.a.createElement("div",{className:"dashboard__rate d-flex"},r.a.createElement("div",{className:"like"},r.a.createElement("span",null,null===l||void 0===l?void 0:l.like),r.a.createElement("span",{className:"reaction like-light"})),r.a.createElement("div",{className:"dislike"},r.a.createElement("span",null,null===l||void 0===l?void 0:l.dislike),r.a.createElement("span",{className:"reaction like-light flip"}))),r.a.createElement("div",{className:"dashboard__description"},r.a.createElement("h4",null,"Description:"),r.a.createElement("p",null,null===l||void 0===l?void 0:l.description)))))}(e)})):r.a.createElement("div",null,"No video here. Share video to make it funny"))};function G(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=j().login,c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0],f=l[1],b=Object(n.useState)(!1),h=Object(s.a)(b,2),E=h[0],g=h[1],k=Object(w.f)();function x(){return(x=Object(u.a)(o.a.mark((function n(r){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),n.prev=1,f(""),g(!0),n.next=6,a(e.current.value,t.current.value);case 6:k.push("/"),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),f("Failed to log in");case 12:g(!1);case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))).apply(this,arguments)}return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(d.a.Body,null,r.a.createElement("h2",{className:"text-center mb-4"},"Log In"),i&&r.a.createElement(m.a,{variant:"danger"},i),r.a.createElement(p.a,{onSubmit:function(e){return x.apply(this,arguments)}},r.a.createElement(p.a.Group,{id:"email"},r.a.createElement(p.a.Label,null,"Email"),r.a.createElement(p.a.Control,{type:"email",ref:e,required:!0})),r.a.createElement(p.a.Group,{id:"password"},r.a.createElement(p.a.Label,null,"Password"),r.a.createElement(p.a.Control,{type:"password",ref:t,required:!0})),r.a.createElement(v.a,{disabled:E,className:"w-100",type:"submit"},"Log In")),r.a.createElement("div",{className:"w-100 text-center mt-3"},r.a.createElement(O.b,{to:"/forgot-password"},"Forgot Password?")))),r.a.createElement("div",{className:"w-100 text-center mt-2"},"Need an account? ",r.a.createElement(O.b,{to:"/signup"},"Sign Up")))}a(75);var B=function(e){var t=Object(w.f)(),a=j(),c=a.login,l=a.currentUser,i=a.logout,d=Object(n.useState)(""),p=Object(s.a)(d,2),v=p[0],f=p[1],b=Object(n.useState)(""),h=Object(s.a)(b,2),E=h[0],g=h[1],k=Object(n.useState)(""),x=Object(s.a)(k,2),y=x[0],N=x[1],S=Object(n.useState)(!1),C=Object(s.a)(S,2),P=C[0],L=C[1],I=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,N(""),e.next=5,c(v,E);case 5:L(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),N(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N(""),e.prev=1,e.next=4,i();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.log("error",e.t0),N(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement(O.b,{to:"/"},r.a.createElement("img",{src:"./phim1080.png",alt:"logo",width:"300"})),l?r.a.createElement("div",{className:"d-flex"},r.a.createElement("p",null,"Welcome ",null===l||void 0===l?void 0:l.email),r.a.createElement("button",{style:{margin:"0 10px"},disabled:P,onClick:function(){t.push("/share")}},"Share a movie"),r.a.createElement("button",{style:{margin:"0 10px"},disabled:P,onClick:function(){return A()}},"Logout")):r.a.createElement("div",null,r.a.createElement("input",{className:"email",placeholder:"email",value:v,onChange:function(e){return f(e.target.value)}}),r.a.createElement("input",{className:"password",placeholder:"password",value:E,type:"password",onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{className:"login-btn",disabled:P,onClick:function(){return I()}},"Login / Register"))),y&&r.a.createElement(m.a,{variant:"danger"},y))},D=a(54),F=a.n(D).a.create({baseURL:"https://www.googleapis.com/youtube/v3",timeout:5e3});function V(e){return q.apply(this,arguments)}function q(){return(q=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get(t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V("/videos?part=snippet&id=".concat(t,"&fields=items/snippet/title,items/snippet/description&key=").concat("AIzaSyB6Izic5eDN4axlvZcXZvg-6YnSbG5f1Zk"));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\\&v=)([^#\\&\\?]*).*/);return t&&11===t[2].length?t[2]:"error"},J=function(e){var t=Y(e);return new Promise(function(){var e=Object(u.a)(o.a.mark((function e(a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:r=e.sent,a(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0.message||"Get info fail");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}())},M=function(){var e=j().currentUser,t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],l=a[1],i=function(){var t=Object(u.a)(o.a.mark((function t(){var a,n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return l(""),alert("Please login to share video"),t.abrupt("return");case 4:return t.prev=4,a=Y(c),t.next=8,J(c);case 8:return n=t.sent,r={title:null===n||void 0===n?void 0:n.items[0].snippet.title,shareBy:null===e||void 0===e?void 0:e.email,like:0,dislike:0,description:null===n||void 0===n?void 0:n.items[0].snippet.title,src:"https://www.youtube.com/embed/".concat(a)},t.next=12,A.create(r);case 12:l(""),alert("Thanks for sharing"),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),console.log("error",t.t0);case 19:case"end":return t.stop()}}),t,null,[[4,16]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("p",null,"Share your Youtube video here"),r.a.createElement("input",{placeholder:"Youtube url",value:c,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{onClick:function(){return i()}},"Share"))};a(93);var W=function(){return r.a.createElement(y.a,{className:"d-flex",style:{minHeight:"100vh"}},r.a.createElement("div",{className:"w-100"},r.a.createElement(O.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(k,null,r.a.createElement(U,null,r.a.createElement(B,null),r.a.createElement(w.c,null,r.a.createElement(w.a,{exact:!0,path:"/",component:_}),r.a.createElement(w.a,{path:"/signup",component:x}),r.a.createElement(w.a,{path:"/login",component:G}),r.a.createElement(w.a,{path:"/share",component:M}))))))))};a(94);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root"))}},[[95,1,2]]]);
//# sourceMappingURL=main.c2e01b46.chunk.js.map